<!DOCTYPE html>
<html>
<head>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
  <section id="hero" class="hero d-flex align-items-center section-bg">
    <div class="container">
      <div class="row justify-content-between gy-5">
        <div class="col"></div>
        <div class="col-sm-5">  
          <h3>Ed. Jean Paull</h3>
          <div id="ad-content">
            <img src="/img/ApBeiraMar.webp" class="img-fluid" alt="Apartamento Beira Mar.">
            <p></p>
            <h6>Categoria: Venda</h6>
            <h6>Características: Imóvel na Madalena em Recife/PE, com 120 m2, três quartos, dois banheiros sendo um suíte, duas vagas de garagem, no valor de R$ 550.000,00</h6>
            <p></p>
            <h6>Corretor de imóveis: Alessandro Barbosa - CRECI 14004</h6>
            <p></p>
          </div>
          <button type="button" class="btn-book-a-table" onclick="captureAd()">Gerar Imagem</button>
        </div>
        <div class="col"></div>    
      </div>     
    </div>
  </section><!-- End Hero Section -->

  <script>
    function captureAd() {
      var adContent = document.getElementById("ad-content");

      html2canvas(adContent).then(function(canvas) {
        var adImage = canvas.toDataURL("image/png");

        // Cria um novo elemento de imagem para exibir a imagem gerada
        var imageElement = document.createElement("img");
        imageElement.src = adImage;

        // Cria um novo botão "Baixar Imagem" e adiciona um manipulador de eventos
        var downloadButton = document.createElement("a");
        downloadButton.className = "btn-book-a-table";
        downloadButton.innerText = "Baixar Imagem";
        downloadButton.href = adImage;
        downloadButton.download = "anuncio.png";

        // Remove o botão "Gerar Imagem"
        var generateButton = document.querySelector(".btn-book-a-table");
        generateButton.parentNode.removeChild(generateButton);

        // Adiciona a imagem e o botão "Baixar Imagem" ao elemento principal
        var mainElement = document.querySelector(".col-sm-5");
        mainElement.appendChild(imageElement);
        mainElement.appendChild(downloadButton);
      });
    }
  </script>
</body>
</html>
